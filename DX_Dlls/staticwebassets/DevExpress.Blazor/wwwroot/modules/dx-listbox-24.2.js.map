{"version":3,"file":"dx-listbox-24.2.js","sources":["../../Scripts/editors/dx-listbox.ts"],"sourcesContent":["var _a;\r\nimport { __decorate } from \"tslib\";\r\nimport { customElement, property } from \"lit/decorators.js\";\r\nimport { html } from \"lit\";\r\nimport { DxUIElement } from \"../common/dx-ui-element\";\r\nimport { RectHelper } from \"../utils/rect\";\r\nimport { CssClasses } from \"../css-classes\";\r\nimport { DxElementPointerEventsHelper } from \"../common/dx-html-element-pointer-events-helper\";\r\nimport * as PointerEvents from \"../common/pointer-events\";\r\nconst DxListBoxLegacyTagName = \"dxbl-listbox\";\r\nconst IsSelectedItemAttributeName = \"data-is-selected-item\";\r\nconst MultipleColumnsScrollableContainerClassName = \"dxbs-grid-vsd\";\r\nexport class ListBoxLegacyCssClasses {\r\n}\r\n_a = ListBoxLegacyCssClasses;\r\nListBoxLegacyCssClasses.ListBox = CssClasses.Prefix + \"-listbox\";\r\nListBoxLegacyCssClasses.Item = _a.ListBox + \"-item\";\r\nListBoxLegacyCssClasses.ItemSelected = _a.Item + \"-selected\";\r\nListBoxLegacyCssClasses.ItemActive = _a.Item + \"-active\";\r\nexport class ListBoxSelectedItemsChangedEvent extends Event {\r\n    constructor() {\r\n        super(ListBoxSelectedItemsChangedEvent.eventName, {\r\n            bubbles: true,\r\n            composed: false,\r\n            cancelable: true\r\n        });\r\n    }\r\n}\r\nListBoxSelectedItemsChangedEvent.eventName = \"dxlistboxselecteditemschanged\";\r\nlet DxListBoxLegacy = class DxListBoxLegacy extends DxUIElement {\r\n    constructor() {\r\n        super();\r\n        this._handlePointerEventsMode = PointerEvents.HandlePointerEventsMode.None;\r\n        this.boundSlotChangedHandler = this.onSlotChanged.bind(this);\r\n        this.displayed = false;\r\n        this.isMultipleColumns = false;\r\n        this.itemContainerElement = null;\r\n        this.resizeObserver = new ResizeObserver(this.onResized.bind(this));\r\n        this.itemsContainerMutationObserver = new MutationObserver(this.onSelectedItemChanged.bind(this));\r\n        this.pointerEventsHelper = new DxElementPointerEventsHelper(this);\r\n    }\r\n    connectedCallback() {\r\n        super.connectedCallback();\r\n        this.resizeObserver.observe(this);\r\n        this.pointerEventsHelper.initialize();\r\n    }\r\n    disconnectedCallback() {\r\n        super.disconnectedCallback();\r\n        this.resizeObserver.disconnect();\r\n        this.itemsContainerMutationObserver.disconnect();\r\n        this.pointerEventsHelper.dispose();\r\n    }\r\n    render() {\r\n        return html `\r\n            <slot @slotchange=\"${this.boundSlotChangedHandler}\">\r\n            </slot>\r\n        `;\r\n    }\r\n    scrollToFocusedItem(scrollTop) {\r\n        const focusedItem = this.querySelector(`[${IsSelectedItemAttributeName}]`);\r\n        if (!focusedItem)\r\n            return;\r\n        if (!scrollTop) {\r\n            focusedItem.scrollIntoView({ block: \"nearest\" });\r\n            return;\r\n        }\r\n        const scrollableContainer = this.getScrollableContainerElement();\r\n        scrollableContainer.scrollTop = focusedItem.offsetTop;\r\n    }\r\n    onSlotChanged(_) {\r\n        this.itemContainerElement = this.getItemContainerElement();\r\n        this.itemsContainerMutationObserver.observe(this.itemContainerElement, {\r\n            attributeFilter: [IsSelectedItemAttributeName],\r\n            attributeOldValue: true,\r\n            subtree: true\r\n        });\r\n    }\r\n    onResized(entries, _) {\r\n        if (entries.length < 1)\r\n            return;\r\n        const actualDisplayed = !RectHelper.fromDomRect(entries[0].contentRect).isEmpty;\r\n        if (actualDisplayed && !this.displayed)\r\n            this.scrollToFocusedItem(true);\r\n        this.displayed = actualDisplayed;\r\n    }\r\n    onSelectedItemChanged(_, __) {\r\n        const event = new ListBoxSelectedItemsChangedEvent();\r\n        this.dispatchEvent(event);\r\n    }\r\n    getItemContainerElement() {\r\n        if (this.isMultipleColumns)\r\n            return this.querySelector(\"table tbody\");\r\n        return this.querySelector(\"ul\");\r\n    }\r\n    getScrollableContainerElement() {\r\n        if (this.isMultipleColumns)\r\n            return this.querySelector(`.${MultipleColumnsScrollableContainerClassName}`);\r\n        return this;\r\n    }\r\n    // Pointer events interaction\r\n    get handlePointerEventsMode() {\r\n        return this._handlePointerEventsMode;\r\n    }\r\n    get handlePointerEventsTarget() {\r\n        return this;\r\n    }\r\n    get handlePointerEventsDelay() {\r\n        return PointerEvents.LongTapInteractionTimeout;\r\n    }\r\n    get hoverTitleElementsSelector() {\r\n        return null;\r\n    }\r\n    get bypassNonInlineHoverTitleElementChildSelector() {\r\n        return null;\r\n    }\r\n    shouldProcessPointerEvent(evt) {\r\n        return true;\r\n    }\r\n};\r\n__decorate([\r\n    property({ type: Boolean, attribute: \"is-multiple-columns\" })\r\n], DxListBoxLegacy.prototype, \"isMultipleColumns\", void 0);\r\nDxListBoxLegacy = __decorate([\r\n    customElement(DxListBoxLegacyTagName)\r\n], DxListBoxLegacy);\r\nexport { DxListBoxLegacy };\r\nfunction loadModule() { }\r\nexport default { loadModule };\r\n"],"names":["PointerEvents.HandlePointerEventsMode","html","PointerEvents.LongTapInteractionTimeout","property","customElement"],"mappings":"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"}