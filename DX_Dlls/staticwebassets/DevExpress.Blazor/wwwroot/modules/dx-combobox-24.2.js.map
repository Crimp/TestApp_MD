{"version":3,"file":"dx-combobox-24.2.js","sources":["../../Scripts/editors/comboboxbase/comboboxbase-events.ts","../../Scripts/editors/combobox/dx-combobox.ts"],"sourcesContent":["import { CustomEventsHelper } from \"../../blazor/custom-events-helper\";\r\nimport { comboBoxBaseTagName } from \"../constants\";\r\nexport class KeyDownEvent extends CustomEvent {\r\n    constructor(key, altKey, ctrlKey, text) {\r\n        super(KeyDownEvent.eventName, {\r\n            detail: new KeyDownContext(key, altKey, ctrlKey, text),\r\n            bubbles: true,\r\n            composed: true,\r\n            cancelable: true\r\n        });\r\n    }\r\n}\r\nKeyDownEvent.eventName = comboBoxBaseTagName + \".keydown\";\r\nexport class KeyUpEvent extends CustomEvent {\r\n    constructor(key) {\r\n        super(KeyUpEvent.eventName, {\r\n            detail: new KeyUpContext(key),\r\n            bubbles: true,\r\n            composed: true,\r\n            cancelable: true\r\n        });\r\n    }\r\n}\r\nKeyUpEvent.eventName = comboBoxBaseTagName + \".keyup\";\r\nexport class KeyDownContext {\r\n    constructor(key, altKey, ctrlKey, text) {\r\n        this.Key = key;\r\n        this.AltKey = altKey;\r\n        this.CtrlKey = ctrlKey;\r\n        this.Text = text;\r\n    }\r\n}\r\nexport class KeyUpContext {\r\n    constructor(key) {\r\n        this.Key = key;\r\n    }\r\n}\r\nCustomEventsHelper.register(KeyDownEvent.eventName, x => {\r\n    return x.detail;\r\n});\r\nCustomEventsHelper.register(KeyUpEvent.eventName, x => {\r\n    return x.detail;\r\n});\r\n","import { __decorate } from \"tslib\";\r\nimport { Browser } from \"@devexpress/utils/lib/browser\";\r\nimport adaptiveDropdownComponents from \"../../popup/adaptivedropdowncomponents\";\r\nimport { property } from \"lit/decorators.js\";\r\nimport { DxDropDownBase } from \"../dropdownbase/dx-dropdown-base3\";\r\nimport { ListBoxSelectedItemsChangedEvent } from \"../dx-listbox\";\r\nimport { KeyDownEvent, KeyUpEvent } from \"../comboboxbase/comboboxbase-events\";\r\nimport { KeyCode } from \"@devexpress/utils/lib/utils/key\";\r\nimport EventHelper from \"../../utils/eventhelper\";\r\nimport { TextEditCssClasses } from \"../text-editor\";\r\nconst DxComboBoxTagName = \"dxbl-combobox\";\r\nexport class DxComboBox extends DxDropDownBase {\r\n    constructor() {\r\n        super();\r\n        this.boundOnDropDownSelectedItemsChangedHandler = this.onDropDownSelectedItemsChanged.bind(this);\r\n        this.tabKeyPressed = false;\r\n        this.filteringEnabled = false;\r\n    }\r\n    get useMobileFocusBehaviour() {\r\n        return Browser.MobileUI || super.useMobileFocusBehaviour;\r\n    }\r\n    processKeyDownServerCommand(evt) {\r\n        if (!this.requireSendKeyCommandToServer(evt))\r\n            return this.isToggleDropDownVisibilityKeyCommand(evt);\r\n        const text = !this.fieldElement ? this.fieldText : this.fieldElementValue;\r\n        this.dispatchEvent(new KeyDownEvent(evt.key, evt.altKey, evt.ctrlKey || evt.metaKey, text));\r\n        return true;\r\n    }\r\n    processCapturedKeyDownAsync(e, options) {\r\n        if (this.processKeyDownServerCommand(e)) {\r\n            e.preventDefault();\r\n            options.handled = true;\r\n            return Promise.resolve();\r\n        }\r\n        return super.processCapturedKeyDownAsync(e, options);\r\n    }\r\n    processKeyDown(evt) {\r\n        if (evt.keyCode === KeyCode.Tab)\r\n            this.tabKeyPressed = true;\r\n        const captureManagerUsed = this.isDropDownOpen;\r\n        if (!captureManagerUsed)\r\n            this.processKeyDownServerCommand(evt);\r\n        return super.processKeyDown(evt);\r\n    }\r\n    processKeyUp(evt) {\r\n        if (evt.keyCode === KeyCode.Up || evt.keyCode === KeyCode.Down)\r\n            this.dispatchEvent(new KeyUpEvent(evt.key));\r\n        this.tabKeyPressed = false;\r\n        return false;\r\n    }\r\n    raiseFocusOut(text) {\r\n        super.raiseFocusOut(text, this.tabKeyPressed);\r\n    }\r\n    onTextInput(evt) {\r\n        if (!this.inputElement)\r\n            return;\r\n        if (!this.isDropDownOpen && evt.data && evt.data.length > 0)\r\n            this.toggleDropDownVisibility();\r\n        if (!this.filteringEnabled)\r\n            return;\r\n        evt.stopPropagation();\r\n        this.raiseFieldText();\r\n    }\r\n    onTextChange(_) { }\r\n    onDropDownSelectedItemsChanged(evt) {\r\n        evt.stopPropagation();\r\n        const dropDownListBox = evt.target;\r\n        dropDownListBox === null || dropDownListBox === void 0 ? void 0 : dropDownListBox.scrollToFocusedItem(false);\r\n    }\r\n    ensurePopupElement() {\r\n        var _a;\r\n        super.ensurePopupElement();\r\n        (_a = this.popupElement) === null || _a === void 0 ? void 0 : _a.addEventListener(ListBoxSelectedItemsChangedEvent.eventName, this.boundOnDropDownSelectedItemsChangedHandler);\r\n    }\r\n    disposePopupElement() {\r\n        var _a;\r\n        (_a = this.popupElement) === null || _a === void 0 ? void 0 : _a.removeEventListener(ListBoxSelectedItemsChangedEvent.eventName, this.boundOnDropDownSelectedItemsChangedHandler);\r\n        super.disposePopupElement();\r\n    }\r\n    requireSendKeyCommandToServer(evt) {\r\n        switch (evt.keyCode) {\r\n            case KeyCode.Enter:\r\n            case KeyCode.Esc:\r\n            case KeyCode.Up:\r\n            case KeyCode.Down:\r\n            case KeyCode.PageUp:\r\n            case KeyCode.PageDown:\r\n                return true;\r\n            case KeyCode.Home:\r\n            case KeyCode.End:\r\n                return evt.ctrlKey || evt.metaKey;\r\n        }\r\n        return false;\r\n    }\r\n    isToggleDropDownVisibilityKeyCommand(evt) {\r\n        return (evt.altKey || evt.metaKey) && (evt.key === \"ArrowUp\" || evt.key === \"ArrowDown\");\r\n    }\r\n    applyTextPropertyCore() {\r\n        if (!this.fieldElement)\r\n            return;\r\n        super.applyTextPropertyCore();\r\n        if (this.fieldText !== \"\" && !this.allowInput)\r\n            this.fieldElement.setSelectionRange(0, 0);\r\n    }\r\n    processPointerDown(e) {\r\n        if (EventHelper.containsInComposedPath(e, this.isEditBoxElement.bind(this)) && !this.isDropDownOpen)\r\n            this.toggleDropDownVisibility();\r\n        return super.processPointerDown(e);\r\n    }\r\n    getFieldElement() {\r\n        return this.querySelector(`.${TextEditCssClasses.TextEditInput}`);\r\n    }\r\n}\r\n__decorate([\r\n    property({ type: Boolean, attribute: \"filtering-enabled\" })\r\n], DxComboBox.prototype, \"filteringEnabled\", void 0);\r\ncustomElements.define(DxComboBoxTagName, DxComboBox);\r\nfunction loadModule() { }\r\nexport default { loadModule, adaptiveDropdownComponents };\r\n"],"names":["Browser","KeyCode","property"],"mappings":"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"}