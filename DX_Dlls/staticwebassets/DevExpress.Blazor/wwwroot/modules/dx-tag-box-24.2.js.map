{"version":3,"file":"dx-tag-box-24.2.js","sources":["../../Scripts/editors/tagbox/contstants.ts","../../Scripts/editors/tagbox/dx-tag-box.ts"],"sourcesContent":["var _a;\r\nimport { CssClasses } from \"../../css-classes\";\r\nexport class TagBoxCssClasses {\r\n}\r\n_a = TagBoxCssClasses;\r\nTagBoxCssClasses.TagClass = CssClasses.Prefix + \"-tag\";\r\nTagBoxCssClasses.TagTemplateClass = _a.TagClass + \"-tmpl\";\r\nTagBoxCssClasses.TagCloseButtonClass = _a.TagClass + \"-btn-close\";\r\n","import adaptiveDropdownComponents from \"../../popup/adaptivedropdowncomponents\";\r\nimport { tagBox2TagName } from \"../constants\";\r\nimport EventHelper from \"../../utils/eventhelper\";\r\nimport { DxDropDownListBox, ListSearchMode } from \"../dropdownbase/dx-dropdown-list-box\";\r\nimport { KeyCode, KeyUtils } from \"@devexpress/utils/lib/utils/key\";\r\nimport { addFocusHiddenAttribute, isFocusableElement } from \"../../focus-utils\";\r\nimport { findParentBySelector } from \"../../dom-utils\";\r\nimport { TagBoxCssClasses } from \"./contstants\";\r\nimport { DxTextEditor } from \"../text-editor\";\r\nexport class DxTagBox2 extends DxDropDownListBox {\r\n    constructor() {\r\n        super();\r\n    }\r\n    connectedCallback() {\r\n        super.connectedCallback();\r\n    }\r\n    isFocusableElementInMainElementTemplate(element) {\r\n        if (findParentBySelector(element, `.${TagBoxCssClasses.TagTemplateClass}`) && isFocusableElement(element))\r\n            return true;\r\n        return super.isFocusableElementInMainElementTemplate(element);\r\n    }\r\n    disconnectedCallback() {\r\n        super.disconnectedCallback();\r\n    }\r\n    get isSearchActive() {\r\n        return this.searchMode !== ListSearchMode.None;\r\n    }\r\n    processPointerDown(e) {\r\n        var _a;\r\n        const isTagCloseButton = EventHelper.containsInComposedPath(e, this.isTagCloseButtonElement);\r\n        const isClearButton = EventHelper.containsInComposedPath(e, DxTextEditor.isClearButtonElement);\r\n        const isEditorButton = EventHelper.containsInComposedPath(e, DxTextEditor.isEditorButtonElement);\r\n        const isFieldElement = e.target === this.fieldElement;\r\n        const shouldToggleDropDownVisibility = !isTagCloseButton && !this.isFocusableElementInMainElementTemplate(e.target);\r\n        if (isFieldElement || shouldToggleDropDownVisibility)\r\n            this.toggleDropDownVisibility();\r\n        addFocusHiddenAttribute(this);\r\n        if (isEditorButton && this.focused)\r\n            this.raiseFieldChange();\r\n        if (isClearButton || isEditorButton || isTagCloseButton)\r\n            e.preventDefault();\r\n        if (!this.focused && (isEditorButton && !this.useAdaptiveLayout))\r\n            (_a = this.editBoxElement) === null || _a === void 0 ? void 0 : _a.focus();\r\n        return true;\r\n    }\r\n    applyTextPropertyCore() {\r\n        super.applyTextPropertyCore();\r\n        if (this.fieldElementValue) {\r\n            this.selectAll();\r\n            this.raiseFieldText();\r\n        }\r\n        this.setInputSizeAttribute();\r\n    }\r\n    onFieldReady(field, firstInit) {\r\n        super.onFieldReady(field, firstInit);\r\n        if (firstInit)\r\n            this.setInputSizeAttribute();\r\n    }\r\n    updatePlaceholder() {\r\n        super.updatePlaceholder();\r\n        this.setInputSizeAttribute();\r\n    }\r\n    onTextInput(evt) {\r\n        super.onTextInput(evt);\r\n        this.setInputSizeAttribute();\r\n    }\r\n    tryProcessKeyDown(evt) {\r\n        if (super.tryProcessKeyDown(evt))\r\n            return true;\r\n        switch (KeyUtils.getEventKeyCode(evt)) {\r\n            case KeyCode.Backspace:\r\n                if (this.fieldElementValue)\r\n                    return false;\r\n                this.dispatchKeyDownEvent(evt);\r\n                return true;\r\n        }\r\n        return false;\r\n    }\r\n    setInputSizeAttribute() {\r\n        if (!this.inputElement)\r\n            return;\r\n        this.inputElement.setAttribute(\"size\", this.getInputSize().toString());\r\n    }\r\n    getInputSize() {\r\n        if (this.fieldElementValue)\r\n            return this.fieldElementValue.length;\r\n        if (this.placeholder)\r\n            return this.placeholder.length;\r\n        return 1;\r\n    }\r\n    isTagTemplateElement(target) {\r\n        var _a;\r\n        const element = target;\r\n        return element ? (_a = element.classList) === null || _a === void 0 ? void 0 : _a.contains(TagBoxCssClasses.TagTemplateClass) : false;\r\n    }\r\n    isTagCloseButtonElement(target) {\r\n        var _a;\r\n        const element = target;\r\n        return element ? (_a = element.classList) === null || _a === void 0 ? void 0 : _a.contains(TagBoxCssClasses.TagCloseButtonClass) : false;\r\n    }\r\n}\r\ncustomElements.define(tagBox2TagName, DxTagBox2);\r\nfunction loadModule() { }\r\nexport default { loadModule, adaptiveDropdownComponents };\r\n"],"names":["KeyUtils","KeyCode"],"mappings":"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"}