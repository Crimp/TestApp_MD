{"version":3,"file":"dx-drawer-24.2.js","sources":["../../Scripts/layout/drawer/dx-drawer.ts"],"sourcesContent":["import { __decorate } from \"tslib\";\r\nimport { customElement, property } from \"lit/decorators.js\";\r\nimport SingleSlotElementBase from \"../../common/single-slot-element-base\";\r\nimport { DxTagNames } from \"../../dx-tag-names\";\r\nimport { focusTrapSingleton } from \"../../popup/focustrap\";\r\nlet DxDrawerPanel = class DxDrawerPanel extends SingleSlotElementBase {\r\n    constructor() {\r\n        super(...arguments);\r\n        this._focusInHandler = this.focusIn.bind(this);\r\n        this._focusOutHandler = this.focusOut.bind(this);\r\n        this.focusLoop = false;\r\n    }\r\n    disconnectedCallback() {\r\n        super.disconnectedCallback();\r\n        if (this.focusLoop)\r\n            this.removeFocusTrapEvents();\r\n    }\r\n    updated(props) {\r\n        super.updated(props);\r\n        if (props.has(\"focusLoop\"))\r\n            this.onFocusLoopUpdated();\r\n    }\r\n    onFocusLoopUpdated() {\r\n        if (this.focusLoop) {\r\n            this.addFocusTrapEvents();\r\n            if (this.contains(document.activeElement))\r\n                this.activateFocusTrap();\r\n        }\r\n        else {\r\n            this.removeFocusTrapEvents();\r\n            this.deactivateFocusTrap();\r\n        }\r\n    }\r\n    addFocusTrapEvents() {\r\n        this.addEventListener(\"focusin\", this._focusInHandler);\r\n        this.addEventListener(\"focusout\", this._focusOutHandler);\r\n    }\r\n    removeFocusTrapEvents() {\r\n        this.removeEventListener(\"focusin\", this._focusInHandler);\r\n        this.removeEventListener(\"focusout\", this._focusOutHandler);\r\n    }\r\n    focusIn(evt) {\r\n        const relatedTarget = evt.relatedTarget;\r\n        if (this.contains(relatedTarget))\r\n            return;\r\n        this.activateFocusTrap();\r\n    }\r\n    focusOut(evt) {\r\n        const relatedTarget = evt.relatedTarget;\r\n        if (this.contains(relatedTarget) || this.contains(document.activeElement))\r\n            return;\r\n        this.deactivateFocusTrap();\r\n    }\r\n    activateFocusTrap() {\r\n        focusTrapSingleton.activate(this, true, true, false);\r\n    }\r\n    deactivateFocusTrap() {\r\n        focusTrapSingleton.deactivate(this, false);\r\n    }\r\n};\r\n__decorate([\r\n    property({ type: Boolean, attribute: \"focus-loop\" })\r\n], DxDrawerPanel.prototype, \"focusLoop\", void 0);\r\nDxDrawerPanel = __decorate([\r\n    customElement(DxTagNames.DrawerPanel)\r\n], DxDrawerPanel);\r\nexport { DxDrawerPanel };\r\n"],"names":["property","customElement"],"mappings":"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"}