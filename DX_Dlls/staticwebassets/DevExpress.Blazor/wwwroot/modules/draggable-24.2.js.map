{"version":3,"file":"draggable-24.2.js","sources":["../../Scripts/popup/draggable.ts"],"sourcesContent":["import { ThumbDragStartedEvent, ThumbDragDeltaEvent, ThumbDragCompletedEvent } from \"../common/thumb\";\r\nimport EventHelper from \"../utils/eventhelper\";\r\nimport DataQaUtils from \"../utils/data-qa-utils\";\r\nimport LayoutHelper from \"../utils/layouthelper\";\r\nimport RafAction from \"../utils/rafaction\";\r\nimport DomUtils from \"../utils/domhelper\";\r\nimport TransformHelper from \"../utils/transformhelper\";\r\nconst dxDraggableTagName = \"dxbl-draggable\";\r\nclass DxDraggable extends HTMLElement {\r\n    get left() {\r\n        return this.leftField;\r\n    }\r\n    set left(value) {\r\n        this.leftField = value;\r\n    }\r\n    get top() {\r\n        return this.topField;\r\n    }\r\n    set top(value) {\r\n        this.topField = value;\r\n    }\r\n    constructor() {\r\n        super();\r\n        this.dragX = 0;\r\n        this.dragY = 0;\r\n        this.leftField = 0;\r\n        this.topField = 0;\r\n        this.rafAction = new RafAction();\r\n        this.dragStartedHandler = this.dragStarted.bind(this);\r\n        this.dragDeltaHandler = this.dragDelta.bind(this);\r\n        this.dragCompletedHandler = this.dragCompleted.bind(this);\r\n        const shadowRoot = this.attachShadow({ mode: \"closed\" });\r\n        shadowRoot.innerHTML = `\r\n            <style>\r\n              :host {\r\n                  position: absolute;\r\n                  display: block;\r\n              }\r\n            </style>\r\n            <slot/>`;\r\n    }\r\n    connectedCallback() {\r\n        DataQaUtils.setLoaded(this);\r\n        this.addEventListener(ThumbDragStartedEvent.eventName, this.dragStartedHandler);\r\n        this.addEventListener(ThumbDragDeltaEvent.eventName, this.dragDeltaHandler);\r\n        this.addEventListener(ThumbDragCompletedEvent.eventName, this.dragCompletedHandler);\r\n    }\r\n    disconnectedCallback() {\r\n        DataQaUtils.removeLoaded(this);\r\n    }\r\n    dragStarted(args) {\r\n        EventHelper.markHandled(args);\r\n        const parent = LayoutHelper.findParent(this, x => DomUtils.isAbsolutePositioning(x));\r\n        const rect = LayoutHelper.getRelativeElementRect(this, parent);\r\n        this.left = rect.x;\r\n        this.top = rect.y;\r\n        this.style.transform = TransformHelper.translate(this.left, this.top);\r\n    }\r\n    dragDelta(args) {\r\n        EventHelper.markHandled(args);\r\n        this.left += args.detail.deltaX;\r\n        this.top += args.detail.deltaY;\r\n        this.rafAction.execute(() => this.style.transform = TransformHelper.translate(this.left, this.top));\r\n    }\r\n    dragCompleted(args) {\r\n        EventHelper.markHandled(args);\r\n        this.rafAction.cancel();\r\n        this.style.transform = TransformHelper.translate(this.left, this.top);\r\n    }\r\n}\r\ncustomElements.define(dxDraggableTagName, DxDraggable);\r\nfunction init() {\r\n}\r\nexport default { init, DxDraggable, dxDraggableTagName };\r\n"],"names":["DomUtils"],"mappings":"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"}