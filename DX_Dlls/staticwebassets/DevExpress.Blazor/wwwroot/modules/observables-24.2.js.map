{"version":3,"file":"observables-24.2.js","sources":["../../Scripts/observables.ts"],"sourcesContent":["/* eslint-disable @typescript-eslint/explicit-module-boundary-types */\r\nexport class Subscription {\r\n    constructor() {\r\n        this.subscribers = [];\r\n    }\r\n    subscribe(callback, _ = false) {\r\n        if (this.subscribers.indexOf(callback) === -1)\r\n            this.subscribers.push(callback);\r\n    }\r\n    unsubscribe(callback) {\r\n        const index = this.subscribers.indexOf(callback);\r\n        if (index !== -1)\r\n            this.subscribers.splice(index, 1);\r\n    }\r\n}\r\nSubscription.Empty = new Subscription();\r\nexport class Emitter extends Subscription {\r\n    emit(data) {\r\n        this.subscribers.forEach(s => s(data));\r\n    }\r\n}\r\nexport class Subject extends Subscription {\r\n    constructor(value) {\r\n        super();\r\n        this.isInitialized = arguments.length === 1;\r\n        this.value = value;\r\n    }\r\n    update(newValue) {\r\n        if (!this.isInitialized || newValue !== this.value) {\r\n            this.isInitialized = true;\r\n            this.value = newValue;\r\n            this.subscribers.forEach(s => s(newValue));\r\n        }\r\n    }\r\n    subscribe(callback, skipInit = false) {\r\n        if (this.isInitialized && !skipInit)\r\n            callback(this.value);\r\n        super.subscribe(callback, skipInit);\r\n    }\r\n    asTrigger(valuesOrFunc) {\r\n        const result = new Subject(null);\r\n        if (typeof valuesOrFunc !== \"function\")\r\n            this.subscribe(v => result.update(valuesOrFunc.indexOf(v) !== -1));\r\n        else\r\n            this.subscribe(v => result.update(valuesOrFunc(v)));\r\n        return result;\r\n    }\r\n    or(subj) {\r\n        const result = new Subject(null);\r\n        this.subscribe(v => result.update(v || subj.value));\r\n        subj.subscribe(v => result.update(this.value || v));\r\n        return result;\r\n    }\r\n    and(subj) {\r\n        const result = new Subject(null);\r\n        this.subscribe(v => result.update(v && subj.value));\r\n        subj.subscribe(v => result.update(this.value && v));\r\n        return result;\r\n    }\r\n    join(subj) {\r\n        const result = new Subject(null);\r\n        this.subscribe(v => result.update([v, subj.value]));\r\n        subj.subscribe(v => result.update([this.value, v]));\r\n        return result;\r\n    }\r\n}\r\n"],"names":[],"mappings":"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"}