{"version":3,"file":"tabbable-24.2.js","sources":["../../Scripts/popup/tabbable.ts"],"sourcesContent":["import DomHelper from \"../utils/domhelper\";\r\nimport { InputType, Tags } from \"../constants\";\r\nconst tabbableSelectors = [\r\n    \"a[href]\",\r\n    \"audio[controls]\",\r\n    \"button\",\r\n    \"[contenteditable]:not([contenteditable=\\\"false\\\"])\",\r\n    \"details>summary:first-of-type\",\r\n    \"details\",\r\n    \"input\",\r\n    \"select\",\r\n    \"textarea\",\r\n    \"[tabindex]\",\r\n    \"video[controls]\",\r\n];\r\nconst tabbableSelector = tabbableSelectors.join(\",\");\r\nclass Tabbable {\r\n    static getTabbables(element, self) {\r\n        const tabbables = this.findTabbables(element, self);\r\n        const standardOrdered = [];\r\n        const sortByIndex = [];\r\n        tabbables.forEach((tabbable, index) => {\r\n            const tabIndex = Tabbable.getTabIndex(tabbable);\r\n            if (tabIndex === 0)\r\n                standardOrdered.push(tabbable);\r\n            else\r\n                sortByIndex.push({ index: index, tabIndex: tabIndex, item: tabbable });\r\n        });\r\n        return sortByIndex\r\n            .sort((a, b) => {\r\n            if (a.tabIndex === b.tabIndex)\r\n                return a.index - b.index;\r\n            return a.tabIndex - b.tabIndex;\r\n        })\r\n            .map(x => x.item)\r\n            .concat(standardOrdered);\r\n    }\r\n    static findTabbables(element, self) {\r\n        const tabbables = Array.from(element.querySelectorAll(tabbableSelector));\r\n        if (self && (element.matches(tabbableSelector) || element.webkitMatchesSelector(tabbableSelector)))\r\n            tabbables.unshift(element);\r\n        return tabbables.filter(Tabbable.filterTabbable);\r\n    }\r\n    static filterTabbable(element) {\r\n        const disabled = element;\r\n        if (disabled.disabled)\r\n            return false;\r\n        if (Tabbable.isHiddenInput(element))\r\n            return false;\r\n        if (DomHelper.isHidden(element))\r\n            return false;\r\n        if (Tabbable.getTabIndex(element) < 0)\r\n            return false;\r\n        return true;\r\n    }\r\n    static getTabIndex(element) {\r\n        const tabIndexAttr = element.getAttribute(\"tabindex\");\r\n        if (tabIndexAttr) {\r\n            const tabIndex = parseInt(tabIndexAttr, 10);\r\n            if (!isNaN(tabIndex))\r\n                return tabIndex;\r\n        }\r\n        if (element.contentEditable === \"true\")\r\n            return 0;\r\n        if (element.nodeName === Tags.audio || element.nodeName === Tags.video || element.nodeName === Tags.details)\r\n            return 0;\r\n        return element.tabIndex;\r\n    }\r\n    static isHiddenInput(element) {\r\n        return element.tagName === Tags.input && element.getAttribute(\"type\") === InputType.hidden;\r\n    }\r\n}\r\nexport { Tabbable };\r\n"],"names":[],"mappings":"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"}