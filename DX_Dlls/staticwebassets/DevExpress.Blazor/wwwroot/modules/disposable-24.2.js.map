{"version":3,"file":"disposable-24.2.js","sources":["../../Scripts/disposable.ts"],"sourcesContent":["import { log } from \"./dom-utils\";\r\nfunction generateDisposeIdCore() {\r\n    const rawId = (62135596800000 + (new Date()).getTime()).toString() + getRandomInt(1, 1000).toString();\r\n    return parseInt(rawId);\r\n}\r\nfunction generateDisposeId() {\r\n    let id;\r\n    do\r\n        id = generateDisposeIdCore();\r\n    while (Disposable[id]);\r\n    log(\"generateDisposeId = \" + id);\r\n    return id.toString();\r\n}\r\nfunction getRandomInt(min, max) {\r\n    return Math.floor(Math.random() * (max - min)) + min;\r\n}\r\nexport function disposeEvents(element) {\r\n    const disposeId = element.dataset.disposeId ? parseInt(element.dataset.disposeId) : -1;\r\n    if (disposeId > -1) {\r\n        Disposable[disposeId]();\r\n        delete Disposable[disposeId];\r\n        delete element.dataset.disposeId;\r\n    }\r\n    logDisposableCount();\r\n}\r\nexport function registerDisposableEvents(element, dispose) {\r\n    if (!element.dataset.disposeId)\r\n        element.dataset.disposeId = generateDisposeId();\r\n    Disposable[parseInt(element.dataset.disposeId)] = dispose;\r\n    logDisposableCount();\r\n}\r\nconst Disposable = [];\r\nfunction logDisposableCount() {\r\n    const count = Disposable.filter(d => d).length;\r\n    log(\"count=\" + count);\r\n}\r\n"],"names":[],"mappings":"AACA,SAAS,qBAAqB,GAAG;AACjC,IAAI,MAAM,KAAK,GAAG,CAAC,cAAc,GAAG,CAAC,IAAI,IAAI,EAAE,EAAE,OAAO,EAAE,EAAE,QAAQ,EAAE,GAAG,YAAY,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,QAAQ,EAAE,CAAC;AAC1G,IAAI,OAAO,QAAQ,CAAC,KAAK,CAAC,CAAC;AAC3B,CAAC;AACD,SAAS,iBAAiB,GAAG;AAC7B,IAAI,IAAI,EAAE,CAAC;AACX,IAAI;AACJ,QAAQ,EAAE,GAAG,qBAAqB,EAAE,CAAC;AACrC,WAAW,UAAU,CAAC,EAAE,CAAC,EAAE;AAE3B,IAAI,OAAO,EAAE,CAAC,QAAQ,EAAE,CAAC;AACzB,CAAC;AACD,SAAS,YAAY,CAAC,GAAG,EAAE,GAAG,EAAE;AAChC,IAAI,OAAO,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,MAAM,EAAE,IAAI,GAAG,GAAG,GAAG,CAAC,CAAC,GAAG,GAAG,CAAC;AACzD,CAAC;AACM,SAAS,aAAa,CAAC,OAAO,EAAE;AACvC,IAAI,MAAM,SAAS,GAAG,OAAO,CAAC,OAAO,CAAC,SAAS,GAAG,QAAQ,CAAC,OAAO,CAAC,OAAO,CAAC,SAAS,CAAC,GAAG,CAAC,CAAC,CAAC;AAC3F,IAAI,IAAI,SAAS,GAAG,CAAC,CAAC,EAAE;AACxB,QAAQ,UAAU,CAAC,SAAS,CAAC,EAAE,CAAC;AAChC,QAAQ,OAAO,UAAU,CAAC,SAAS,CAAC,CAAC;AACrC,QAAQ,OAAO,OAAO,CAAC,OAAO,CAAC,SAAS,CAAC;AACzC,KAAK;AACL,IAAI,kBAAkB,EAAE,CAAC;AACzB,CAAC;AACM,SAAS,wBAAwB,CAAC,OAAO,EAAE,OAAO,EAAE;AAC3D,IAAI,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,SAAS;AAClC,QAAQ,OAAO,CAAC,OAAO,CAAC,SAAS,GAAG,iBAAiB,EAAE,CAAC;AACxD,IAAI,UAAU,CAAC,QAAQ,CAAC,OAAO,CAAC,OAAO,CAAC,SAAS,CAAC,CAAC,GAAG,OAAO,CAAC;AAC9D,IAAI,kBAAkB,EAAE,CAAC;AACzB,CAAC;AACD,MAAM,UAAU,GAAG,EAAE,CAAC;AACtB,SAAS,kBAAkB,GAAG;AAC9B,IAAkB,UAAU,CAAC,MAAM,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,OAAO;AAEnD;;;;"}