{"version":3,"file":"dx-map-24.2.js","sources":["../../Scripts/client-components/map/events.ts","../../Scripts/components/dx-map.ts"],"sourcesContent":["import { CustomEventsHelper } from \"../../blazor/custom-events-helper\";\r\nconst dxMapTag = \"dxbl-map\";\r\nexport class MapClickEvent extends CustomEvent {\r\n    constructor(lat, lng) {\r\n        super(MapClickEvent.eventName, {\r\n            detail: new MapClickEventContext(lat, lng),\r\n            bubbles: true,\r\n            composed: true,\r\n            cancelable: true\r\n        });\r\n    }\r\n}\r\nMapClickEvent.eventName = dxMapTag + \".click\";\r\nexport class MapMarkerClickEvent extends CustomEvent {\r\n    constructor(key) {\r\n        super(MapMarkerClickEvent.eventName, {\r\n            detail: new MapMarkerClickEventContext(key),\r\n            bubbles: true,\r\n            composed: true,\r\n            cancelable: true\r\n        });\r\n    }\r\n}\r\nMapMarkerClickEvent.eventName = dxMapTag + \".marker-click\";\r\nclass MapClickEventContext {\r\n    constructor(lat, lng) {\r\n        this.Latitude = lat;\r\n        this.Longitude = lng;\r\n    }\r\n}\r\nclass MapMarkerClickEventContext {\r\n    constructor(key) {\r\n        this.Key = key;\r\n    }\r\n}\r\nCustomEventsHelper.register(MapClickEvent.eventName, x => x.detail);\r\nCustomEventsHelper.register(MapMarkerClickEvent.eventName, x => x.detail);\r\n","var _a;\r\nvar _b;\r\nimport { __decorate } from \"tslib\";\r\nimport { customElement } from \"lit/decorators.js\";\r\nimport { DevExtremeWidgetWrapper } from \"../client-components/common/devextreme-widget-wrapper\";\r\nimport { MapClickEvent, MapMarkerClickEvent } from \"../client-components/map/events\";\r\n// temporary fix console error from bing map\r\n(_a = (_b = window)[\"sj_evt\"]) !== null && _a !== void 0 ? _a : (_b[\"sj_evt\"] = { fire: () => { }, bind: () => { } });\r\nconst markersKey = \"markers\";\r\nconst markerIdKey = \"markerId\";\r\nconst onClickKey = \"onClick\";\r\nlet DxMap = class DxMap extends DevExtremeWidgetWrapper {\r\n    createWidgetHandlers() {\r\n        return {\r\n            ...super.createWidgetHandlers(),\r\n            onClick: (e) => this.onMapClick(e),\r\n            onReady: (e) => this.onMapReady(e),\r\n            onOptionChanged: (e) => this.onMapOptionChanged(e)\r\n        };\r\n    }\r\n    getWidgetModuleName() { return \"ui\"; }\r\n    getWidgetTypeName() { return \"dxMap\"; }\r\n    disposeWidget(widget) {\r\n        var _a;\r\n        (_a = widget === null || widget === void 0 ? void 0 : widget._lastAsyncAction) === null || _a === void 0 ? void 0 : _a.catch(_ => { });\r\n        super.disposeWidget(widget);\r\n    }\r\n    createWidgetDefaultOptions() {\r\n        return {\r\n            height: \"100%\",\r\n            width: \"100%\"\r\n        };\r\n    }\r\n    processSpecialOptions(_options) {\r\n        super.processSpecialOptions(_options);\r\n        this.preapreMarkerClickHandlers(_options[markersKey]);\r\n    }\r\n    onMapClick(e) {\r\n        const lat = e.location.lat;\r\n        const lng = e.location.lng;\r\n        this.dispatchEvent(new MapClickEvent(lat, lng));\r\n    }\r\n    onMapReady(_) {\r\n        this.changeLoadingPanelVisibility(false);\r\n    }\r\n    onMapOptionChanged(_) {\r\n        this.changeLoadingPanelVisibility(false);\r\n    }\r\n    preapreMarkerClickHandlers(markers) {\r\n        markers === null || markers === void 0 ? void 0 : markers.forEach(m => {\r\n            if (m[markerIdKey]) {\r\n                const key = m[markerIdKey];\r\n                m[onClickKey] = () => { this.onMarkerClick(key); };\r\n                delete m[markerIdKey];\r\n            }\r\n        });\r\n    }\r\n    onMarkerClick(key) {\r\n        this.dispatchEvent(new MapMarkerClickEvent(key));\r\n    }\r\n};\r\nDxMap = __decorate([\r\n    customElement(\"dxbl-map\")\r\n], DxMap);\r\nexport { DxMap };\r\n"],"names":["customElement"],"mappings":"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"}